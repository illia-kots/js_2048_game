{"version":3,"sources":["scripts/main.js"],"names":["buttonStart","document","querySelector","rowField","querySelectorAll","gameScore","messageStart","messageRestart","messageWin","messageLose","score","gameField","randomize","randomRow","Math","floor","random","randomColumn","updateCellStyles","gameStart","moveRight","map","row","filter","num","concat","moveLeft","moveDown","slideRight","slideLeft","moveUp","moveMix","move","combinate","newArray","x","length","i","push","unshift","reverse","combineRow","total","innerHTML","combineColumn","col","children","className","checkForWin","some","cell","includes","classList","add","remove","replace","checkForLose","gameOver","noZeros","r","c","addEventListener","key","contains","code"],"mappings":"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","file":"main.45245841.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst buttonStart = document.querySelector('.start');\nconst rowField = document.querySelectorAll('.field-row');\nconst gameScore = document.querySelector('.game-score');\nconst messageStart = document.querySelector('.message-start');\nconst messageRestart = document.querySelector('.message-restart');\nconst messageWin = document.querySelector('.message-win');\nconst messageLose = document.querySelector('.message-lose');\nlet score = 0;\nlet gameField = [\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n];\n\nfunction randomize() {\n  const randomRow = Math.floor(Math.random() * 4);\n  const randomColumn = Math.floor(Math.random() * 4);\n\n  if (gameField[randomRow][randomColumn] === 0) {\n    gameField[randomRow][randomColumn] = Math.random() < 0.1 ? 4 : 2;\n  } else {\n    randomize();\n  }\n  updateCellStyles();\n}\n\nfunction gameStart() {\n  gameField = [\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n  ];\n\n  randomize();\n  randomize();\n  updateCellStyles();\n}\n\nfunction moveRight() {\n  gameField = gameField.map(row => {\n    return row.filter(num => num === 0)\n      .concat(row.filter(num => num !== 0));\n  });\n}\n\nfunction moveLeft() {\n  gameField = gameField.map(row => {\n    return row.filter(num => num !== 0)\n      .concat(row.filter(num => num === 0));\n  });\n}\n\nfunction moveDown() {\n  slideRight();\n  moveLeft();\n  slideLeft();\n}\n\nfunction moveUp() {\n  slideRight();\n  moveRight();\n  slideLeft();\n}\n\nfunction moveMix(move, combinate) {\n  move();\n  combinate();\n  move();\n}\n\nfunction slideRight() {\n  const newArray = [];\n\n  for (let x = 0; x < gameField[0].length; x++) {\n    newArray[x] = [];\n\n    for (let i = gameField.length - 1; i >= 0; i--) {\n      newArray[x].push(gameField[i][x]);\n    }\n  }\n\n  gameField = newArray;\n};\n\nfunction slideLeft() {\n  const newArray = [];\n\n  for (let x = 0; x < gameField[0].length; x++) {\n    newArray[x] = [];\n\n    for (let i = gameField.length - 1; i >= 0; i--) {\n      newArray[x].unshift(gameField[i][x]);\n    }\n  }\n\n  gameField = newArray.reverse();\n};\n\nfunction combineRow() {\n  for (const row of gameField) {\n    for (let i = 0; i < 4; i++) {\n      if (row[i] === row[i + 1]) {\n        const total = row[i] + row[i + 1];\n\n        row[i] = total;\n        row[i + 1] = 0;\n        score += total;\n        gameScore.innerHTML = score;\n      }\n    }\n  }\n}\n\nfunction combineColumn() {\n  slideRight();\n  combineRow();\n  slideLeft();\n}\n\nfunction updateCellStyles() {\n  for (let row = 0; row < 4; row++) {\n    for (let col = 0; col < 4; col++) {\n      if (gameField[row][col] > 0) {\n        rowField[row].children[col].innerHTML = gameField[row][col];\n\n        rowField[row].children[col].className = `\n        field-cell field-cell--${gameField[row][col]}`;\n      } else {\n        rowField[row].children[col].innerHTML = '';\n        rowField[row].children[col].className = 'field-cell';\n      }\n    }\n  }\n}\n\nbuttonStart.addEventListener('click', () => {\n  buttonStart.classList.replace('start', 'restart');\n  buttonStart.innerHTML = 'Restart';\n  messageStart.classList.add('hidden');\n  messageRestart.classList.remove('hidden');\n  messageWin.classList.add('hidden');\n  messageLose.classList.add('hidden');\n  gameScore.innerHTML = 0;\n  score = 0;\n\n  gameStart();\n});\n\ndocument.addEventListener('keyup', (key) => {\n  if (buttonStart.classList.contains('restart')) {\n    if (key.code === 'ArrowRight') {\n      moveMix(moveRight, combineRow);\n      randomize();\n    } else if (key.code === 'ArrowLeft') {\n      moveMix(moveLeft, combineRow);\n      randomize();\n    } else if (key.code === 'ArrowUp') {\n      moveMix(moveUp, combineColumn);\n      randomize();\n    } else if (key.code === 'ArrowDown') {\n      moveMix(moveDown, combineColumn);\n      randomize();\n    }\n  }\n  checkForWin();\n  checkForLose();\n  updateCellStyles();\n});\n\nfunction checkForWin() {\n  gameField.some((cell) => {\n    if (cell.includes(2048)) {\n      messageRestart.classList.add('hidden');\n      messageWin.classList.remove('hidden');\n      buttonStart.classList.replace('restart', 'start');\n      buttonStart.innerHTML = 'Start';\n    }\n  });\n}\n\nfunction checkForLose() {\n  let gameOver = true;\n  const noZeros = gameField.some(cell => cell.includes(0));\n\n  for (let r = 0; r < 4; r++) {\n    for (let c = 0; c < 3; c++) {\n      if (gameField[r][c] === gameField[r][c + 1]\n        || gameField[c][r] === gameField[c + 1][r]) {\n        gameOver = false;\n      }\n    }\n  }\n\n  if (gameOver && !noZeros) {\n    messageLose.classList.remove('hidden');\n    messageRestart.classList.add('hidden');\n    buttonStart.classList.replace('restart', 'start');\n    buttonStart.innerHTML = 'Start';\n  }\n};\n"]}